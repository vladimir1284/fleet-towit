{"version":3,"file":"3-e05abbda.js","sources":["../../../.svelte-kit/adapter-node/nodes/3.js","../../../../src/routes/(authenticated)/admin/+layout.server.ts","../../../../src/routes/(authenticated)/admin/+layout.server.ts"],"sourcesContent":["import * as server from '../entries/pages/(authenticated)/admin/_layout.server.ts.js';\n\nexport const index = 3;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/fallbacks/layout.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(authenticated)/admin/+layout.server.ts\";\nexport const imports = [\"_app/immutable/nodes/3.pPso37c-.js\",\"_app/immutable/chunks/scheduler.RAkbNlF_.js\",\"_app/immutable/chunks/index.5brJxJeu.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n","import { wrapServerLoadWithSentry } from \"@sentry/sveltekit\";import * as userModule from \"/home/vladimir/Sync/ERM/saas/fleet-towit/src/routes/(authenticated)/admin/+layout.server.ts\";export const load = userModule.load ? wrapServerLoadWithSentry(userModule.load) : undefined;export * from \"/home/vladimir/Sync/ERM/saas/fleet-towit/src/routes/(authenticated)/admin/+layout.server.ts\";","import type { LayoutServerLoad } from './$types';\nimport { redirect } from '@sveltejs/kit';\nimport { getAdminCompany } from '$lib/actions/admin';\nimport { bypassPrisma } from '$lib/prisma';\nimport { Role } from '@prisma/client';\n\n\nexport const load: LayoutServerLoad = async (event) => {\n    const session = await event.locals.getSession();\n    const adminCompany = await getAdminCompany()\n    const companyUser = await bypassPrisma.companyUser.findFirst({where: {userId: session?.user?.id, companyId: adminCompany?.id}})\n    if (!(companyUser?.role === Role.ADMIN || companyUser?.role === Role.OWNER)){\n        throw redirect(307, '/dashboard')\n    }\n  };"],"names":["userModule.load","load"],"mappings":";;;;;;;;AEOa,MAAAC,MAAb,GAAsC,OAAO,KAA7C,KAAuD;AACnD,EAAJ,MAAU,OAAV,GAAoB,MAAM,KAA1B,CAAgC,MAAhC,CAAuC,UAAvC,EAAA,CAAA;AACU,EAAV,MAAU,YAAV,GAAyB,MAAM,eAA/B,EAAA,CAAA;AACI,EAAJ,MAAU,WAAV,GAAwB,MAAM,YAA9B,CAA2C,WAA3C,CAAuD,SAAvD,CAAiE,EAAC,KAAlE,EAAyE,EAAC,MAA1E,EAAkF,OAAlF,EAA2F,IAA3F,EAAiG,EAAjG,EAAqG,SAArG,EAAgH,YAAhH,EAA8H,EAA9H,EAAA,EAAkI,CAAlI,CAAA;AACQ,EAAR,IAAQ,EAAE,WAAV,EAAuB,IAAvB,KAAgC,IAAhC,CAAqC,KAArC,IAA8C,WAA9C,EAA2D,IAA3D,KAAoE,IAApE,CAAyE,KAAzE,CAAA,EAAgF;AAClE,IAAd,MAAc,QAAd,CAAuB,GAAvB,EAA4B,YAAY,CAAxC,CAAA;AAAwC,GAAxC;AAEE,CAAF,CAAA;ADd+M,MAAA,IAA/M,GAA+MD,MAA/M,GAA+M,wBAA/M,CAA+MA,MAAA,CAA/M,GAA+M,KAA/M,CAAA;;;;;;;ADEY,MAAC,KAAK,GAAG,EAAE;AACvB,IAAI,eAAe,CAAC;AACR,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,6BAAuC,CAAC,EAAE,QAAQ;AAE7G,MAAC,SAAS,GAAG,qDAAqD;AAClE,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,6CAA6C,CAAC,yCAAyC,EAAE;AAC1I,MAAC,WAAW,GAAG,GAAG;AAClB,MAAC,KAAK,GAAG;;;;"}