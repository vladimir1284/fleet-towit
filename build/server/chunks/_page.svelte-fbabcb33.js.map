{"version":3,"file":"_page.svelte-fbabcb33.js","sources":["../../../../src/routes/(authenticated)/admin/users/+page.svelte","../../../../src/lib/components/forms-components/users/DeleteUserForm.svelte"],"sourcesContent":["<script lang=\"ts\">\n\t// @ts-nocheck\n\timport {\n\t\tCard,\n\t\tGradientButton,\n\t\tTable,\n\t\tTableBody,\n\t\tTableBodyCell,\n\t\tTableBodyRow,\n\t\tTableHead,\n\t\tTableHeadCell,\n\t\tModal,\n\t\tAlert\n\t} from 'flowbite-svelte';\n\timport { TrashBinSolid, FileEditSolid, CheckSolid } from 'flowbite-svelte-icons';\n    import CreateUserForm from '$lib/components/forms-components/users/CreateUserForm.svelte';\n    import DeleteUserForm from '$lib/components/forms-components/users/DeleteUserForm.svelte';\n\timport type { PageData } from './$types';\n\timport { invalidate } from '$app/navigation';\n\n\texport let data: PageData;\n\n\tlet showAlert = false;\n\tlet popupModal = false;\n\tlet deleteModal = false;\n\tlet selectedId = '';\n\n\tfunction handleCloseModal(event) {\n\t\tpopupModal = event.detail;\n\t\tshowAlert = true;\n\n\t\tsetTimeout(() => {\n\t\t\tshowAlert = false;\n\t\t}, 4000);\n\t};\n\n\tfunction handleDelete(userId) {\n\t\tdeleteModal = true;\n\t\tselectedId = userId\n\t}\n\n\tasync function handleCloseDeleteModal(event) {\n\t\tdeleteModal = event.detail;\n\t\tawait invalidate('./users');\n    \n\t};\n\n    \n</script>\n\n<Modal size=\"xs\" padding=\"md\" bind:open={popupModal}>\n\t<CreateUserForm data={data} on:formvalid={handleCloseModal} />\n</Modal>\n\n<Modal size=\"xs\" padding=\"md\" bind:open={deleteModal}>\n\t<DeleteUserForm data={selectedId} on:formvalid={handleCloseDeleteModal} />\n</Modal>\n\n\n<div>\n\t<Card size=\"9xl\">\n\t\t<Table>\n\t\t\t<caption\n\t\t\t\tclass=\"p-5 text-lg font-semibold text-left text-gray-900 bg-white dark:text-white dark:bg-gray-800\"\n\t\t\t>\n\t\t\t\t<GradientButton shadow color=\"blue\" on:click={() => (popupModal = true)}\n\t\t\t\t\t>Create user</GradientButton\n\t\t\t\t>\n\t\t\t</caption>\n\t\t\t<TableHead>\n\t\t\t\t<TableHeadCell>EMAIL</TableHeadCell>\n\t\t\t\t<TableHeadCell>NAME</TableHeadCell>\n\t\t\t\t<TableHeadCell>ROLE</TableHeadCell>\n\t\t\t\t<TableHeadCell></TableHeadCell>\n\t\t\t</TableHead>\n\t\t\t<TableBody class=\"divide-y\">\n\t\t\t\t{#each data.users as user}\n\t\t\t\t<TableBodyRow>\n\t\t\t\t\t<TableBodyCell>{user.user.email}</TableBodyCell>\n\t\t\t\t\t<TableBodyCell>{user.user.name || '-'}</TableBodyCell>\n\t\t\t\t\t<TableBodyCell>{user.role}</TableBodyCell>\n\t\t\t\t\t<TableBodyCell class=\" flex w-32 justify-between\">\n\t\t\t\t\t\t<a href={'./users/update/'+user.id}>\n\t\t\t\t\t\t\t<FileEditSolid class=\"text-gray-400\" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<TrashBinSolid class=\"text-red-500\" on:click={() => handleDelete(user.id)}/>\n\t\t\t\t\t</TableBodyCell>\n\t\t\t\t</TableBodyRow>\n\t\t\t\t{/each}\n\t\t\t</TableBody>\n\t\t</Table>\n\t</Card>\n\n\n\t{#if showAlert}\n\t\t<Alert class=\"fixed bottom-0 right-0 m-4\" color=\"green\" dismissable>\n\t\t\t<CheckSolid slot=\"icon\" class=\"w-4 h-4\" />\n\t\t\tUser succesfully created!\n\t\t</Alert>\n\t{/if}\n</div>\n","<script>\n\t// @ts-nocheck\n\timport { Button, Select, FloatingLabelInput } from 'flowbite-svelte';\n\timport { EnvelopeSolid } from 'flowbite-svelte-icons';\n\timport { superForm } from 'sveltekit-superforms/client';\n\timport { createEventDispatcher } from 'svelte';\n\texport let data;\n    console.log(data)\n\tconst dispatch = createEventDispatcher();\n\n    const handleSubmit = async (event) => {\n       event.preventDefault();\n       const response = await fetch(`./users/delete/${data}`, {\n           method: 'DELETE',\n       });\n       if (!response.ok) {\n           console.error('Failed to delete user');\n           return;\n       }\n       console.log('User deleted successfully');\n       dispatch('formvalid',false)\n   };\n\n</script>\n\n<div class=\"flex flex-col justify-center align-center space-y-6\">\n\t<div class=\"sm:col-span-2\">\n\t\t<h1>Delete user?</h1>\n\t</div>\n\t<Button class=\"w-[50%] mx-auto block\" on:click={handleSubmit}>Delete</Button>\n</div>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;ACMA,EAAA,IAAA,EAAY,IAAZ,EAAA,GAAgB,OAAhB,CAAA;AACI,EAAJ,OAAA,CAAY,GAAZ,CAAgB,IAAI,CAApB,CAAA;AACkB,EAAlB,qBAAA,EAAA,CAAA;;;;;;;;;;ADYY,EAAZ,IAAY,EAAA,IAAZ,EAAA,GAAY,OAAZ,CAAA;AAGA,EAAA,IAAK,UAAL,GAAkB,KAAlB,CAAA;AACA,EAAA,IAAK,WAAL,GAAmB,KAAnB,CAAA;AACA,EAAA,IAAK,UAAL,GAAkB,EAAlB,CAAA;;;;;;;;;;;;;;AAyBA,QAAA,IAAA,EAAyC,UAAzC;AAAyC,OAAzC;;;AAAyC,UAAzC,UAAA,GAAmD,OAAnD,CAAA;;;;;;AACA,UAAA,OAAA,CAAA,EAAA,kBAAA,CAAA,cAAA,EAAA,gBAAA,CAAA,CAAA,QAAA,CAAA,QAAA,EAAA,EAAuB,IAAvB,EAAA,EAA2B,EAA3B,EAA2B,EAAA,CAAA,CAA3B,CAAA,CAAA;AAA2B,SAA3B;;;;;;;AAGA,QAAA,IAAA,EAAyC,WAAzC;AAAyC,OAAzC;;;AAAyC,UAAzC,WAAA,GAAoD,OAApD,CAAA;;;;;;AACA,UAAA,OAAA,CAAA,EAAA,kBAAA,CAAA,cAAA,EAAA,gBAAA,CAAA,CAAA,QAAA,CAAA,QAAA,EAAA,EAAA,IAAA,EAAuB,UAAvB,EAAA,EAAiC,EAAjC,EAAiC,EAAA,CAAA,CAAjC,CAAA,CAAA;AAAiC,SAAjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBW,gBAAX,OAAW,CAAX,EAAW,IAAX,CAAW,IAAX,CAAgB,KAAhB,EAAqB,CAArB,IAAA,KAAqB;;;;;AAErB,0BAAA,OAAA,CAAA,EAAA,MAAA,CAAqB,IAArB,CAA0B,IAA1B,CAA+B,KAAK,CAAA,CAApC,CAAA,CAAA;AAAoC,yBAApC;;;AACqB,0BAArB,OAAqB,CAArB,EAAqB,MAArB,CAAqB,IAArB,CAA0B,IAA1B,CAA+B,IAA/B,IAAuC,GAAG,CAAA,CAA1C,CAAA,CAAA;AAA0C,yBAA1C;;;AACqB,0BAArB,OAAqB,CAArB,EAAqB,MAArB,CAAqB,IAArB,CAA0B,IAAI,CAAA,CAA9B,CAAA,CAAA;AAA8B,yBAA9B;;;AAEA,0BAAA,OAAA,CAAA,EAAA,EAAA,aAAA,CAAA,MAAA,EAAe,iBAAf,GAAiC,IAAjC,CAAsC,EAAtC,EAAwC,CAAA,CAAA,CAAxC,CAAA,EAAwC,kBAAxC,CAAwC,aAAxC,EAAwC,eAAA,CAAxC,CAAwC,QAAxC,CAAwC,QAAxC,EAAwC,EAAA,KAAxC,EAAwC,eAAxC,EAAA,EAAwC,EAAxC,EAAwC,EAAA,CAAA,CAAxC,KAAA,EAAwC,kBAAxC,CAAwC,aAAxC,EAAwC,eAAA,CAAxC,CAAwC,QAAxC,CAAwC,QAAxC,EAAwC,EAAA,KAAxC,EAAwC,cAAxC,EAAA,EAAwC,EAAxC,EAAwC,EAAA,CAAA,CAAxC,CAAA,CAAA,CAAA;AAAwC,yBAAxC;;;;;;;;;;;;;;;;;"}