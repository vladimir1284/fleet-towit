{"version":3,"file":"6-9c89defc.js","sources":["../../../.svelte-kit/adapter-node/nodes/6.js","../../../../src/routes/(authenticated)/admin/companies/+page.server.ts","../../../../src/routes/(authenticated)/admin/companies/+page.server.ts"],"sourcesContent":["import * as server from '../entries/pages/(authenticated)/admin/companies/_page.server.ts.js';\n\nexport const index = 6;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/(authenticated)/admin/companies/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(authenticated)/admin/companies/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/6.tP63BGPs.js\",\"_app/immutable/chunks/scheduler.RAkbNlF_.js\",\"_app/immutable/chunks/index.5brJxJeu.js\",\"_app/immutable/chunks/each.N9yYRwnS.js\",\"_app/immutable/chunks/FileEditSolid.ms6lgoOX.js\",\"_app/immutable/chunks/bundle-mjs.MFJMrG53.js\",\"_app/immutable/chunks/index.KuOYZF30.js\",\"_app/immutable/chunks/Frame.iI6vPlRK.js\",\"_app/immutable/chunks/Modal.TkqycPy2.js\",\"_app/immutable/chunks/Button.jSWztE31.js\",\"_app/immutable/chunks/Card.MHFaTJAb.js\",\"_app/immutable/chunks/CheckSolid.F3P5LcSA.js\",\"_app/immutable/chunks/TrashBinSolid.9m9EZefE.js\",\"_app/immutable/chunks/index.RB1Qc8eZ.js\",\"_app/immutable/chunks/singletons.LsHtuZJq.js\",\"_app/immutable/chunks/index.XGR6uEzK.js\",\"_app/immutable/chunks/paths.zrnwqn2j.js\",\"_app/immutable/chunks/stores.qfWq5sye.js\",\"_app/immutable/chunks/stringify.ZBF_Z-nX.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n","import { wrapServerLoadWithSentry } from \"@sentry/sveltekit\";import * as userModule from \"/home/vladimir/Sync/ERM/saas/fleet-towit/src/routes/(authenticated)/admin/companies/+page.server.ts\";export const load = userModule.load ? wrapServerLoadWithSentry(userModule.load) : undefined;export * from \"/home/vladimir/Sync/ERM/saas/fleet-towit/src/routes/(authenticated)/admin/companies/+page.server.ts\";","import { superValidate } from 'sveltekit-superforms/server';\nimport { fail } from '@sveltejs/kit';\nimport type { PageServerLoad } from './$types.js';\nimport { CompanySchema } from '$lib/zod/index';\nimport { listCompanies, createCompany } from '$lib/actions/admin.js';\n\nconst ExtendCompanySchema = CompanySchema.extend({ id: CompanySchema.shape.id.optional() })  \n\nexport const load = (async () => {\n    const form = await superValidate(CompanySchema);\n    const companies = await listCompanies();\n    return { form: form, companies: companies } \n\n  }) satisfies PageServerLoad\n\nexport const actions = {\n    default: async ({request}) => {\n      const form = await superValidate(request, ExtendCompanySchema);\n      console.log(form)\n        if (!form.valid) {\n            console.log('validation fail')\n            return fail(400, { form });\n          }\n        console.log('validation passed')\n        form.valid = true\n        await createCompany({name: form.data.name, email: form.data.email})\n        const companies = await listCompanies();\n        return {form, companies}\n    } \n}\n\n\n\n\n"],"names":["userModule.load","load"],"mappings":";;;;;;;;;;;;AEMA,MAAM,mBAAN,GAA4B,aAA5B,CAA0C,MAA1C,CAAiD,EAAE,EAAnD,EAAuD,aAAvD,CAAqE,KAArE,CAA2E,EAA3E,CAA8E,QAA9E,EAAA,EAA0F,CAA1F,CAAA;AAEO,MAAMC,MAAb,GAAqB,YAAY;AACvB,EAAV,MAAU,IAAV,GAAiB,MAAM,aAAvB,CAAqC,aAAa,CAAlD,CAAA;AACU,EAAV,MAAU,SAAV,GAAsB,MAAM,aAA5B,EAAA,CAAA;AACW,EAAX,OAAW,EAAE,IAAb,EAAyB,SAAzB,EAAA,CAAA;AAEE,CAAF,CAAA;AAEO,MAAM,OAAb,GAAuB;AAAA,EACnB,OADJ,EACa,OAAO,EAAC,OADrB,EAAA,KACkC;AAC5B,IAAN,MAAY,IAAZ,GAAmB,MAAM,aAAzB,CAAuC,OAAvC,EAAgD,mBAAmB,CAAnE,CAAA;AACM,IAAN,OAAA,CAAc,GAAd,CAAkB,IAAI,CAAtB,CAAA;AACY,IAAZ,IAAY,CAAC,IAAb,CAAkB,KAAlB,EAAyB;AACb,MAAZ,OAAA,CAAoB,GAApB,CAAwB,iBAAiB,CAAzC,CAAA;AACY,MAAZ,OAAmB,IAAnB,CAAwB,GAAxB,EAA6B,EAAE,IAA/B,EAAqC,CAArC,CAAA;AAAqC,KAArC;AAEQ,IAAR,OAAA,CAAgB,GAAhB,CAAoB,mBAAmB,CAAvC,CAAA;AACQ,IAAR,IAAA,CAAa,KAAb,GAAqB,IAArB,CAAA;AACc,IAAd,MAAc,aAAd,CAA4B,EAAC,IAA7B,EAAmC,IAAnC,CAAwC,IAAxC,CAA6C,IAA7C,EAAmD,KAAnD,EAA0D,IAA1D,CAA+D,IAA/D,CAAoE,KAApE,EAA0E,CAA1E,CAAA;AACc,IAAd,MAAc,SAAd,GAA0B,MAAM,aAAhC,EAAA,CAAA;AACe,IAAf,OAAe,EAAC,IAAhB,EAAsB,SAAtB,EAAA,CAAA;AACA,GAAA;AACA,CAAA,CAAA;AD7BuN,MAAA,IAAvN,GAAuND,MAAvN,GAAuN,wBAAvN,CAAuNA,MAAA,CAAvN,GAAuN,KAAvN,CAAA;;;;;;;;ADEY,MAAC,KAAK,GAAG,EAAE;AACvB,IAAI,eAAe,CAAC;AACR,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAkE,CAAC,EAAE,QAAQ;AAExI,MAAC,SAAS,GAAG,6DAA6D;AAC1E,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,6CAA6C,CAAC,yCAAyC,CAAC,wCAAwC,CAAC,iDAAiD,CAAC,8CAA8C,CAAC,yCAAyC,CAAC,yCAAyC,CAAC,yCAAyC,CAAC,0CAA0C,CAAC,wCAAwC,CAAC,8CAA8C,CAAC,iDAAiD,CAAC,yCAAyC,CAAC,8CAA8C,CAAC,yCAAyC,CAAC,yCAAyC,CAAC,0CAA0C,CAAC,6CAA6C,EAAE;AAC70B,MAAC,WAAW,GAAG,GAAG;AAClB,MAAC,KAAK,GAAG;;;;"}