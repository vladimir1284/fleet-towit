{"version":3,"file":"7.Lv9ymzFr.js","sources":["../../../../../../src/lib/components/forms-components/users/DeleteUserForm.svelte","../../../../../../src/routes/(authenticated)/admin/users/+page.svelte"],"sourcesContent":["<script>\n\t// @ts-nocheck\n\timport { Button, Select, FloatingLabelInput } from 'flowbite-svelte';\n\timport { EnvelopeSolid } from 'flowbite-svelte-icons';\n\timport { superForm } from 'sveltekit-superforms/client';\n\timport { createEventDispatcher } from 'svelte';\n\texport let data;\n    console.log(data)\n\tconst dispatch = createEventDispatcher();\n\n    const handleSubmit = async (event) => {\n       event.preventDefault();\n       const response = await fetch(`./users/delete/${data}`, {\n           method: 'DELETE',\n       });\n       if (!response.ok) {\n           console.error('Failed to delete user');\n           return;\n       }\n       console.log('User deleted successfully');\n       dispatch('formvalid',false)\n   };\n\n</script>\n\n<div class=\"flex flex-col justify-center align-center space-y-6\">\n\t<div class=\"sm:col-span-2\">\n\t\t<h1>Delete user?</h1>\n\t</div>\n\t<Button class=\"w-[50%] mx-auto block\" on:click={handleSubmit}>Delete</Button>\n</div>\n","<script lang=\"ts\">\n\t// @ts-nocheck\n\timport {\n\t\tCard,\n\t\tGradientButton,\n\t\tTable,\n\t\tTableBody,\n\t\tTableBodyCell,\n\t\tTableBodyRow,\n\t\tTableHead,\n\t\tTableHeadCell,\n\t\tModal,\n\t\tAlert\n\t} from 'flowbite-svelte';\n\timport { TrashBinSolid, FileEditSolid, CheckSolid } from 'flowbite-svelte-icons';\n    import CreateUserForm from '$lib/components/forms-components/users/CreateUserForm.svelte';\n    import DeleteUserForm from '$lib/components/forms-components/users/DeleteUserForm.svelte';\n\timport type { PageData } from './$types';\n\timport { invalidate } from '$app/navigation';\n\n\texport let data: PageData;\n\n\tlet showAlert = false;\n\tlet popupModal = false;\n\tlet deleteModal = false;\n\tlet selectedId = '';\n\n\tfunction handleCloseModal(event) {\n\t\tpopupModal = event.detail;\n\t\tshowAlert = true;\n\n\t\tsetTimeout(() => {\n\t\t\tshowAlert = false;\n\t\t}, 4000);\n\t};\n\n\tfunction handleDelete(userId) {\n\t\tdeleteModal = true;\n\t\tselectedId = userId\n\t}\n\n\tasync function handleCloseDeleteModal(event) {\n\t\tdeleteModal = event.detail;\n\t\tawait invalidate('./users');\n    \n\t};\n\n    \n</script>\n\n<Modal size=\"xs\" padding=\"md\" bind:open={popupModal}>\n\t<CreateUserForm data={data} on:formvalid={handleCloseModal} />\n</Modal>\n\n<Modal size=\"xs\" padding=\"md\" bind:open={deleteModal}>\n\t<DeleteUserForm data={selectedId} on:formvalid={handleCloseDeleteModal} />\n</Modal>\n\n\n<div>\n\t<Card size=\"9xl\">\n\t\t<Table>\n\t\t\t<caption\n\t\t\t\tclass=\"p-5 text-lg font-semibold text-left text-gray-900 bg-white dark:text-white dark:bg-gray-800\"\n\t\t\t>\n\t\t\t\t<GradientButton shadow color=\"blue\" on:click={() => (popupModal = true)}\n\t\t\t\t\t>Create user</GradientButton\n\t\t\t\t>\n\t\t\t</caption>\n\t\t\t<TableHead>\n\t\t\t\t<TableHeadCell>EMAIL</TableHeadCell>\n\t\t\t\t<TableHeadCell>NAME</TableHeadCell>\n\t\t\t\t<TableHeadCell>ROLE</TableHeadCell>\n\t\t\t\t<TableHeadCell></TableHeadCell>\n\t\t\t</TableHead>\n\t\t\t<TableBody class=\"divide-y\">\n\t\t\t\t{#each data.users as user}\n\t\t\t\t<TableBodyRow>\n\t\t\t\t\t<TableBodyCell>{user.user.email}</TableBodyCell>\n\t\t\t\t\t<TableBodyCell>{user.user.name || '-'}</TableBodyCell>\n\t\t\t\t\t<TableBodyCell>{user.role}</TableBodyCell>\n\t\t\t\t\t<TableBodyCell class=\" flex w-32 justify-between\">\n\t\t\t\t\t\t<a href={'./users/update/'+user.id}>\n\t\t\t\t\t\t\t<FileEditSolid class=\"text-gray-400\" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<TrashBinSolid class=\"text-red-500\" on:click={() => handleDelete(user.id)}/>\n\t\t\t\t\t</TableBodyCell>\n\t\t\t\t</TableBodyRow>\n\t\t\t\t{/each}\n\t\t\t</TableBody>\n\t\t</Table>\n\t</Card>\n\n\n\t{#if showAlert}\n\t\t<Alert class=\"fixed bottom-0 right-0 m-4\" color=\"green\" dismissable>\n\t\t\t<CheckSolid slot=\"icon\" class=\"w-4 h-4\" />\n\t\t\tUser succesfully created!\n\t\t</Alert>\n\t{/if}\n</div>\n"],"names":["ctx","insert_hydration","target","div1","anchor","append_hydration","div0","data","$$props","dispatch","createEventDispatcher","handleSubmit","event","set_data","t","t_value","dirty","a","each_value","ensure_array_like","i","each_blocks","caption","create_if_block","div","showAlert","popupModal","deleteModal","selectedId","handleCloseModal","$$invalidate","handleDelete","userId","handleCloseDeleteModal","invalidate","value","click_handler","user"],"mappings":"y4BA6B+D,QAAM,cAAN,QAAM,wMAApBA,EAAY,CAAA,CAAA,qWAJ7DC,EAKKC,EAAAC,EAAAC,CAAA,EAJJC,EAEKF,EAAAG,CAAA,uMAtBM,KAAAC,CAAI,EAAAC,EACZ,QAAQ,IAAID,CAAI,EACb,MAAAE,EAAWC,KAERC,QAAsBC,GAAK,CAKzB,GAJLA,EAAM,eAAc,EAIf,QAHkB,MAAK,kBAAmBL,CAAI,GAC/C,CAAA,OAAQ,QAAQ,CAAA,GAEN,GAAE,CACZ,QAAQ,MAAM,uBAAuB,SAGzC,QAAQ,IAAI,2BAA2B,EACvCE,EAAS,YAAY,EAAK,yOC+BVT,EAAI,CAAA,CAAA,CAAA,CAAA,oBAAgBA,EAAgB,CAAA,CAAA,uGAApCA,EAAI,CAAA,iJAIJA,EAAU,CAAA,CAAA,CAAA,CAAA,oBAAgBA,EAAsB,CAAA,CAAA,wGAAhDA,EAAU,CAAA,iIAW3B,aAAW,cAAX,aAAW,uEAIE,OAAK,cAAL,OAAK,uEACL,MAAI,cAAJ,MAAI,uEACJ,MAAI,cAAJ,MAAI,28BAMFA,EAAI,EAAA,EAAC,KAAK,MAAK,2EAAfA,EAAI,EAAA,EAAC,KAAK,MAAK,KAAAa,EAAAC,EAAAC,CAAA,iCACf,IAAAA,GAAAf,EAAK,EAAA,EAAA,KAAK,MAAQ,KAAG,+DAArBgB,EAAA,GAAAD,KAAAA,GAAAf,EAAK,EAAA,EAAA,KAAK,MAAQ,KAAG,KAAAa,EAAAC,EAAAC,CAAA,iCACrB,IAAAA,EAAAf,MAAK,KAAI,+DAATgB,EAAA,GAAAD,KAAAA,EAAAf,MAAK,KAAI,KAAAa,EAAAC,EAAAC,CAAA,uXAEf,kBAAkBf,EAAI,EAAA,EAAC,EAAE,UAAlCC,EAEGC,EAAAe,EAAAb,CAAA,kEAFM,kBAAkBJ,EAAI,EAAA,EAAC,+hDAN3BkB,EAAAC,EAAAnB,KAAK,KAAK,uBAAf,OAAIoB,GAAA,uPAACF,EAAAC,EAAAnB,KAAK,KAAK,oBAAf,OAAIoB,GAAA,EAAA,kHAAJ,OAAIA,EAAAC,EAAA,OAAAD,GAAA,yCAAJ,OAAIA,GAAA,+tBAdPnB,EAMSC,EAAAoB,EAAAlB,CAAA,ojCA4BgC,2BAE1C,cAF0C,2BAE1C,8YAhDuCJ,EAAU,CAAA,IAAA,gBAAVA,EAAU,CAAA,4IAIVA,EAAW,CAAA,IAAA,gBAAXA,EAAW,CAAA,4HAwC9CA,EAAS,CAAA,GAAAuB,EAAAvB,CAAA,wRAnCfC,EAyCKC,EAAAsB,EAAApB,CAAA,yHAlDoCJ,EAAU,CAAA,+FAIVA,EAAW,CAAA,mFAwC9CA,EAAS,CAAA,wTA1EH,GAAA,CAAA,KAAAO,CAAA,EAAAC,EAEPiB,EAAY,GACZC,EAAa,GACbC,EAAc,GACdC,EAAa,YAERC,EAAiBjB,EAAA,CACzBkB,EAAA,EAAAJ,EAAad,EAAM,MAAA,MACnBa,EAAY,EAAA,EAEZ,oBACCA,EAAY,EAAA,GACV,cAGKM,EAAaC,EAAA,KACrBL,EAAc,EAAA,MACdC,EAAaI,CAAA,iBAGCC,EAAuBrB,EAAA,CACrCkB,EAAA,EAAAH,EAAcf,EAAM,MAAA,EACd,MAAAsB,GAAW,SAAS,gBAOaR,EAAUS,uBAIVR,EAAWQ,SAWK,MAAAC,EAAA,IAAAN,EAAA,EAAAJ,EAAa,EAAI,OAoBfK,EAAaM,EAAK,EAAE"}