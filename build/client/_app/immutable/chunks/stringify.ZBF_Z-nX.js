class k extends Error{constructor(a,i){super(a),this.name="DevalueError",this.path=i.join("")}}function N(t){return Object(t)!==t}const g=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function A(t){const a=Object.getPrototypeOf(t);return a===Object.prototype||a===null||Object.getOwnPropertyNames(a).sort().join("\0")===g}function D(t){return Object.prototype.toString.call(t).slice(8,-1)}function P(t){switch(t){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t<" "?`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function b(t){let a="",i=0;const s=t.length;for(let f=0;f<s;f+=1){const n=t[f],y=P(n);y&&(a+=t.slice(i,f)+y,i=f+1)}return`"${i===0?t:a+t.slice(i)}"`}const j=-1,S=-2,m=-3,v=-4,_=-5,E=-6;function R(t,a){return B(JSON.parse(t),a)}function B(t,a){if(typeof t=="number")return f(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const i=t,s=Array(i.length);function f(n,y=!1){if(n===j)return;if(n===m)return NaN;if(n===v)return 1/0;if(n===_)return-1/0;if(n===E)return-0;if(y)throw new Error("Invalid input");if(n in s)return s[n];const r=i[n];if(!r||typeof r!="object")s[n]=r;else if(Array.isArray(r))if(typeof r[0]=="string"){const p=r[0],e=a?.[p];if(e)return s[n]=e(f(r[1]));switch(p){case"Date":s[n]=new Date(r[1]);break;case"Set":const l=new Set;s[n]=l;for(let u=1;u<r.length;u+=1)l.add(f(r[u]));break;case"Map":const o=new Map;s[n]=o;for(let u=1;u<r.length;u+=2)o.set(f(r[u]),f(r[u+1]));break;case"RegExp":s[n]=new RegExp(r[1],r[2]);break;case"Object":s[n]=Object(r[1]);break;case"BigInt":s[n]=BigInt(r[1]);break;case"null":const O=Object.create(null);s[n]=O;for(let u=1;u<r.length;u+=2)O[r[u]]=f(r[u+1]);break;default:throw new Error(`Unknown type ${p}`)}}else{const p=new Array(r.length);s[n]=p;for(let e=0;e<r.length;e+=1){const l=r[e];l!==S&&(p[e]=f(l))}}else{const p={};s[n]=p;for(const e in r){const l=r[e];p[e]=f(l)}}return s[n]}return f(0)}function C(t,a){const i=[],s=new Map,f=[];for(const e in a)f.push({key:e,fn:a[e]});const n=[];let y=0;function r(e){if(typeof e=="function")throw new k("Cannot stringify a function",n);if(s.has(e))return s.get(e);if(e===void 0)return j;if(Number.isNaN(e))return m;if(e===1/0)return v;if(e===-1/0)return _;if(e===0&&1/e<0)return E;const l=y++;s.set(e,l);for(const{key:O,fn:u}of f){const w=u(e);if(w)return i[l]=`["${O}",${r(w)}]`,l}let o="";if(N(e))o=I(e);else switch(D(e)){case"Number":case"String":case"Boolean":o=`["Object",${I(e)}]`;break;case"BigInt":o=`["BigInt",${e}]`;break;case"Date":o=`["Date","${e.toISOString()}"]`;break;case"RegExp":const{source:u,flags:w}=e;o=w?`["RegExp",${b(u)},"${w}"]`:`["RegExp",${b(u)}]`;break;case"Array":o="[";for(let c=0;c<e.length;c+=1)c>0&&(o+=","),c in e?(n.push(`[${c}]`),o+=r(e[c]),n.pop()):o+=S;o+="]";break;case"Set":o='["Set"';for(const c of e)o+=`,${r(c)}`;o+="]";break;case"Map":o='["Map"';for(const[c,$]of e)n.push(`.get(${N(c)?I(c):"..."})`),o+=`,${r(c)},${r($)}`;o+="]";break;default:if(!A(e))throw new k("Cannot stringify arbitrary non-POJOs",n);if(Object.getOwnPropertySymbols(e).length>0)throw new k("Cannot stringify POJOs with symbolic keys",n);if(Object.getPrototypeOf(e)===null){o='["null"';for(const c in e)n.push(`.${c}`),o+=`,${b(c)},${r(e[c])}`,n.pop();o+="]"}else{o="{";let c=!1;for(const $ in e)c&&(o+=","),c=!0,n.push(`.${$}`),o+=`${b($)}:${r(e[$])}`,n.pop();o+="}"}}return i[l]=o,l}const p=r(t);return p<0?`${p}`:`[${i.join(",")}]`}function I(t){const a=typeof t;return a==="string"?b(t):t instanceof String?b(t.toString()):t===void 0?j.toString():t===0&&1/t<0?E.toString():a==="bigint"?`["BigInt","${t}"]`:String(t)}export{R as p,C as s,B as u};
//# sourceMappingURL=stringify.ZBF_Z-nX.js.map
