import{o as Ee,t as Se}from"../chunks/scheduler.RAkbNlF_.js";import{S as nt,a as at,b as rt,H as K,N as z,r as te,o as xe,P as Ae,f as We,g as Re,c as ue,i as ke,s as $e,d as V,e as Be,h as ft}from"../chunks/singletons.LsHtuZJq.js";import{b as F}from"../chunks/paths.zrnwqn2j.js";import{p as ut,s as dt,u as ht}from"../chunks/stringify.ZBF_Z-nX.js";new URL("sveltekit-internal://");function pt(a,o){return a==="/"||o==="ignore"?a:o==="never"?a.endsWith("/")?a.slice(0,-1):a:o==="always"&&!a.endsWith("/")?a+"/":a}function _t(a){return a.split("%25").map(decodeURI).join("%25")}function gt(a){for(const o in a)a[o]=decodeURIComponent(a[o]);return a}function Pe({href:a}){return a.split("#")[0]}const mt=["href","pathname","search","toString","toJSON"];function vt(a,o,i){const s=new URL(a);Object.defineProperty(s,"searchParams",{value:new Proxy(s.searchParams,{get(f,m){if(m==="get"||m==="getAll"||m==="has")return g=>(i(g),f[m](g));o();const w=Reflect.get(f,m);return typeof w=="function"?w.bind(f):w}}),enumerable:!0,configurable:!0});for(const f of mt)Object.defineProperty(s,f,{get(){return o(),a[f]},enumerable:!0,configurable:!0});return yt(s),s}function yt(a){Object.defineProperty(a,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const wt="/__data.json",bt=".html__data.json";function Et(a){return a.endsWith(".html")?a.replace(/\.html$/,bt):a.replace(/\/$/,"")+wt}function St(...a){let o=5381;for(const i of a)if(typeof i=="string"){let s=i.length;for(;s;)o=o*33^i.charCodeAt(--s)}else if(ArrayBuffer.isView(i)){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);let f=s.length;for(;f;)o=o*33^s[--f]}else throw new TypeError("value must be a string or TypedArray");return(o>>>0).toString(36)}const ot=window.fetch;window.fetch=(a,o)=>((a instanceof Request?a.method:o?.method||"GET")!=="GET"&&ae.delete(Te(a)),ot(a,o));const ae=new Map;function xt(a){const o=atob(a),i=new Uint8Array(o.length);for(let s=0;s<o.length;s++)i[s]=o.charCodeAt(s);return i.buffer}function At(a,o){const i=Te(a,o),s=document.querySelector(i);if(s?.textContent){let{body:f,...m}=JSON.parse(s.textContent);const w=s.getAttribute("data-ttl");return w&&ae.set(i,{body:f,init:m,ttl:1e3*Number(w)}),s.getAttribute("data-b64")!==null&&(f=xt(f)),Promise.resolve(new Response(f,m))}return window.fetch(a,o)}function Rt(a,o,i){if(ae.size>0){const s=Te(a,i),f=ae.get(s);if(f){if(performance.now()<f.ttl&&["default","force-cache","only-if-cached",void 0].includes(i?.cache))return new Response(f.body,f.init);ae.delete(s)}}return window.fetch(o,i)}function Te(a,o){let s=`script[data-sveltekit-fetched][data-url=${JSON.stringify(a instanceof Request?a.url:a)}]`;if(o?.headers||o?.body){const f=[];o.headers&&f.push([...new Headers(o.headers)].join(",")),o.body&&(typeof o.body=="string"||ArrayBuffer.isView(o.body))&&f.push(o.body),s+=`[data-hash="${St(...f)}"]`}return s}const kt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Pt(a){const o=[];return{pattern:a==="/"?/^\/$/:new RegExp(`^${Ot(a).map(s=>{const f=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(s);if(f)return o.push({name:f[1],matcher:f[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const m=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(s);if(m)return o.push({name:m[1],matcher:m[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!s)return;const w=s.split(/\[(.+?)\](?!\])/);return"/"+w.map((b,y)=>{if(y%2){if(b.startsWith("x+"))return Le(String.fromCharCode(parseInt(b.slice(2),16)));if(b.startsWith("u+"))return Le(String.fromCharCode(...b.slice(2).split("-").map(D=>parseInt(D,16))));const p=kt.exec(b);if(!p)throw new Error(`Invalid param: ${b}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,T,$,P,I]=p;return o.push({name:P,matcher:I,optional:!!T,rest:!!$,chained:$?y===1&&w[0]==="":!1}),$?"(.*?)":T?"([^/]*)?":"([^/]+?)"}return Le(b)}).join("")}).join("")}/?$`),params:o}}function Lt(a){return!/^\([^)]+\)$/.test(a)}function Ot(a){return a.slice(1).split("/").filter(Lt)}function Ut(a,o,i){const s={},f=a.slice(1),m=f.filter(g=>g!==void 0);let w=0;for(let g=0;g<o.length;g+=1){const b=o[g];let y=f[g-w];if(b.chained&&b.rest&&w&&(y=f.slice(g-w,g+1).filter(p=>p).join("/"),w=0),y===void 0){b.rest&&(s[b.name]="");continue}if(!b.matcher||i[b.matcher](y)){s[b.name]=y;const p=o[g+1],T=f[g+1];p&&!p.rest&&p.optional&&T&&b.chained&&(w=0),!p&&!T&&Object.keys(s).length===m.length&&(w=0);continue}if(b.optional&&b.chained){w++;continue}return}if(!w)return s}function Le(a){return a.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function It({nodes:a,server_loads:o,dictionary:i,matchers:s}){const f=new Set(o);return Object.entries(i).map(([g,[b,y,p]])=>{const{pattern:T,params:$}=Pt(g),P={id:g,exec:I=>{const D=T.exec(I);if(D)return Ut(D,$,s)},errors:[1,...p||[]].map(I=>a[I]),layouts:[0,...y||[]].map(w),leaf:m(b)};return P.errors.length=P.layouts.length=Math.max(P.errors.length,P.layouts.length),P});function m(g){const b=g<0;return b&&(g=~g),[b,a[g]]}function w(g){return g===void 0?g:[f.has(g),a[g]]}}function je(a,o=JSON.parse){try{return o(sessionStorage[a])}catch{}}function Oe(a,o,i=JSON.stringify){const s=i(o);try{sessionStorage[a]=s}catch{}}const st=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...st];const $t=new Set([...st]);[...$t];function Tt(a){return a.filter(o=>o!=null)}class pe{constructor(o,i){this.status=o,typeof i=="string"?this.body={message:i}:i?this.body=i:this.body={message:`Error: ${o}`}}toString(){return JSON.stringify(this.body)}}class Ye{constructor(o,i){this.status=o,this.location=i}}class Ce extends Error{constructor(o,i,s){super(s),this.status=o,this.text=i}}const jt="x-sveltekit-invalidated",Ct="x-sveltekit-trailing-slash";function de(a){return a instanceof pe||a instanceof Ce?a.status:500}function Nt(a){return a instanceof Ce?a.text:"Internal Error"}const W=je(nt)??{},ne=je(at,ut)??{},re=je(rt)??{},Xe=history.pushState,he=history.replaceState;function Ue(a){W[a]=$e()}function Qe(a,o){let i=a+1;for(;W[i];)delete W[i],i+=1;for(i=o+1;re[i];)delete re[i],i+=1}function Y(a){return location.href=a.href,new Promise(()=>{})}function Ze(){}function Dt(a,o){const i=It(a),s=a.nodes[0],f=a.nodes[1];s(),f();const m=document.documentElement,w=[],g=[];let b=null;const y={before_navigate:[],on_navigate:[],after_navigate:[]};let p={branch:[],error:null,url:null},T=!1,$=!1,P=!0,I=!1,D=!1,H=!1,X=!1,oe=!1,q,L=history.state?.[K],N=history.state?.[z];L||(L=N=Date.now(),he.call(history,{...history.state,[K]:L,[z]:N},"",location.href));const _e=W[L];_e&&(history.scrollRestoration="manual",scrollTo(_e.x,_e.y));let R,B,ge;async function Ne(){if(await(ge||=Promise.resolve()),!ge)return;ge=null;const t=Z(p.url,!0);b=null;const e=B={},n=t&&await ye(t);e===B&&(n&&(n.type==="redirect"?await se(new URL(n.location,p.url).href,{},1,e):(n.props.page!==void 0&&(R=n.props.page),q.$set(n.props))),w.length=0)}function De(t){g.some(e=>e?.snapshot)&&(re[t]=g.map(e=>e?.snapshot?.capture()))}function Fe(t){re[t]?.forEach((e,n)=>{g[n]?.snapshot?.restore(e)})}function qe(){Ue(L),Oe(nt,W),De(N),Oe(rt,re),Oe(at,ne,dt)}async function se(t,e,n,r){return le({type:"goto",url:te(t),keepfocus:e.keepFocus,noscroll:e.noScroll,replace_state:e.replaceState,redirect_count:n,state:e.state,nav_token:r,accept:()=>{e.invalidateAll&&(oe=!0)}})}async function He(t){return b={id:t.id,promise:ye(t).then(e=>(e.type==="loaded"&&e.state.error&&(b=null),e))},b.promise}async function ie(t){const e=i.find(n=>n.exec(Ge(t)));e&&await Promise.all([...e.layouts,e.leaf].map(n=>n?.[1]()))}function Me(t){p=t.state;const e=document.querySelector("style[data-sveltekit]");e&&e.remove(),R=t.props.page,q=new a.root({target:o,props:{...t.props,stores:V,components:g},hydrate:!0}),Fe(N);const n={from:null,to:{params:p.params,route:{id:p.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};y.after_navigate.forEach(r=>r(n)),$=!0}async function Q({url:t,params:e,branch:n,status:r,error:c,route:l,form:u}){let h="never";for(const S of n)S?.slash!==void 0&&(h=S.slash);t.pathname=pt(t.pathname,h),t.search=t.search;const v={type:"loaded",state:{url:t,params:e,branch:n,error:c,route:l},props:{constructors:Tt(n).map(S=>S.node.component),page:R}};u!==void 0&&(v.props.form=u);let _={},O=!R,U=0;for(let S=0;S<Math.max(n.length,p.branch.length);S+=1){const k=n[S],x=p.branch[S];k?.data!==x?.data&&(O=!0),k&&(_={..._,...k.data},O&&(v.props[`data_${U}`]=_),U+=1)}return(!p.url||t.href!==p.url.href||p.error!==c||u!==void 0&&u!==R.form||O)&&(v.props.page={error:c,params:e,route:{id:l?.id??null},state:{},status:r,url:new URL(t),form:u??null,data:O?_:R.data}),v}async function me({loader:t,parent:e,url:n,params:r,route:c,server_data_node:l}){let u=null,h=!0;const v={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},_=await t();if(_.universal?.load){let O=function(...d){for(const S of d){const{href:k}=new URL(S,n);v.dependencies.add(k)}};const U={route:new Proxy(c,{get:(d,S)=>(h&&(v.route=!0),d[S])}),params:new Proxy(r,{get:(d,S)=>(h&&v.params.add(S),d[S])}),data:l?.data??null,url:vt(n,()=>{h&&(v.url=!0)},d=>{h&&v.search_params.add(d)}),async fetch(d,S){let k;d instanceof Request?(k=d.url,S={body:d.method==="GET"||d.method==="HEAD"?void 0:await d.blob(),cache:d.cache,credentials:d.credentials,headers:d.headers,integrity:d.integrity,keepalive:d.keepalive,method:d.method,mode:d.mode,redirect:d.redirect,referrer:d.referrer,referrerPolicy:d.referrerPolicy,signal:d.signal,...S}):k=d;const x=new URL(k,n);return h&&O(x.href),x.origin===n.origin&&(k=x.href.slice(n.origin.length)),$?Rt(k,x.href,S):At(k,S)},setHeaders:()=>{},depends:O,parent(){return h&&(v.parent=!0),e()},untrack(d){h=!1;try{return d()}finally{h=!0}}};u=await _.universal.load.call(null,U)??null}return{node:_,loader:t,server:l,universal:_.universal?.load?{type:"data",data:u,uses:v}:null,data:u??l?.data??null,slash:F&&(n.pathname===F||n.pathname===F+"/")?"always":_.universal?.trailingSlash??l?.slash}}function Ke(t,e,n,r,c,l){if(oe)return!0;if(!c)return!1;if(c.parent&&t||c.route&&e||c.url&&n)return!0;for(const u of c.search_params)if(r.has(u))return!0;for(const u of c.params)if(l[u]!==p.params[u])return!0;for(const u of c.dependencies)if(w.some(h=>h(new URL(u))))return!0;return!1}function ve(t,e){return t?.type==="data"?t:t?.type==="skip"?e??null:null}function ct(t,e){if(!t)return new Set(e.searchParams.keys());const n=new Set([...t.searchParams.keys(),...e.searchParams.keys()]);for(const r of n){const c=t.searchParams.getAll(r),l=e.searchParams.getAll(r);c.every(u=>l.includes(u))&&l.every(u=>c.includes(u))&&n.delete(r)}return n}async function ye({id:t,invalidating:e,url:n,params:r,route:c}){if(b?.id===t)return b.promise;const{errors:l,layouts:u,leaf:h}=c,v=[...u,h];l.forEach(E=>E?.().catch(()=>{})),v.forEach(E=>E?.[1]().catch(()=>{}));let _=null;const O=p.url?t!==p.url.pathname+p.url.search:!1,U=p.route?c.id!==p.route.id:!1,d=ct(p.url,n);let S=!1;const k=v.map((E,A)=>{const j=p.branch[A],C=!!E?.[0]&&(j?.loader!==E[1]||Ke(S,U,O,d,j.server?.uses,r));return C&&(S=!0),C});if(k.some(Boolean)){try{_=await et(n,k)}catch(E){return ce({status:de(E),error:await ee(E,{url:n,params:r,route:{id:c.id}}),url:n,route:c})}if(_.type==="redirect")return _}const x=_?.nodes;let M=!1;const G=v.map(async(E,A)=>{if(!E)return;const j=p.branch[A],C=x?.[A];if((!C||C.type==="skip")&&E[1]===j?.loader&&!Ke(M,U,O,d,j.universal?.uses,r))return j;if(M=!0,C?.type==="error")throw C;return me({loader:E[1],url:n,params:r,route:c,parent:async()=>{const we={};for(let be=0;be<A;be+=1)Object.assign(we,(await G[be])?.data);return we},server_data_node:ve(C===void 0&&E[0]?{type:"skip"}:C??null,E[0]?j?.server:void 0)})});for(const E of G)E.catch(()=>{});const J=[];for(let E=0;E<v.length;E+=1)if(v[E])try{J.push(await G[E])}catch(A){if(A instanceof Ye)return{type:"redirect",location:A.location};let j=de(A),C;if(x?.includes(A))j=A.status??j,C=A.error;else if(A instanceof pe)C=A.body;else{if(await V.updated.check())return await Y(n);C=await ee(A,{params:r,url:n,route:{id:c.id}})}const fe=await Ve(E,J,l);return fe?await Q({url:n,params:r,branch:J.slice(0,fe.idx).concat(fe.node),status:j,error:C,route:c}):await ze(n,{id:c.id},C,j)}else J.push(void 0);return await Q({url:n,params:r,branch:J,status:200,error:null,route:c,form:e?void 0:null})}async function Ve(t,e,n){for(;t--;)if(n[t]){let r=t;for(;!e[r];)r-=1;try{return{idx:r+1,node:{node:await n[t](),loader:n[t],data:{},server:null,universal:null}}}catch{continue}}}async function ce({status:t,error:e,url:n,route:r}){const c={};let l=null;if(a.server_loads[0]===0)try{const _=await et(n,[!0]);if(_.type!=="data"||_.nodes[0]&&_.nodes[0].type!=="data")throw 0;l=_.nodes[0]??null}catch{(n.origin!==xe||n.pathname!==location.pathname||T)&&await Y(n)}const h=await me({loader:s,url:n,params:c,route:r,parent:()=>Promise.resolve({}),server_data_node:ve(l)}),v={node:await f(),loader:f,universal:null,server:null,data:null};return await Q({url:n,params:c,branch:[h,v],status:t,error:e,route:null})}function Z(t,e){if(ke(t,F))return;const n=Ge(t.pathname);for(const r of i){const c=r.exec(n);if(c)return{id:t.pathname+t.search,invalidating:e,route:r,params:gt(c),url:t}}}function Ge(t){return _t(t.slice(F.length)||"/")}function Je({url:t,type:e,intent:n,delta:r}){let c=!1;const l=tt(p,n,t,e);r!==void 0&&(l.navigation.delta=r);const u={...l.navigation,cancel:()=>{c=!0,l.reject(new Error("navigation was cancelled"))}};return D||y.before_navigate.forEach(h=>h(u)),c?null:l}async function le({type:t,url:e,popped:n,keepfocus:r,noscroll:c,replace_state:l,state:u={},redirect_count:h=0,nav_token:v={},accept:_=Ze,block:O=Ze}){const U=Z(e,!1),d=Je({url:e,type:t,delta:n?.delta,intent:U});if(!d){O();return}const S=L,k=N;_(),D=!0,$&&V.navigating.set(d.navigation),B=v;let x=U&&await ye(U);if(!x){if(ke(e,F))return await Y(e);x=await ze(e,{id:null},await ee(new Ce(404,"Not Found",`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=U?.url||e,B!==v)return d.reject(new Error("navigation was aborted")),!1;if(x.type==="redirect")if(h>=20)x=await ce({status:500,error:await ee(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return se(new URL(x.location,e).href,{},h+1,v),!1;else x.props.page.status>=400&&await V.updated.check()&&await Y(e);if(w.length=0,oe=!1,I=!0,Ue(S),De(k),x.props.page.url.pathname!==e.pathname&&(e.pathname=x.props.page.url.pathname),u=n?n.state:u,!n){const E=l?0:1,A={[K]:L+=E,[z]:N+=E};(l?he:Xe).call(history,A,"",e),l||Qe(L,N)}if(ne[L]=u,b=null,x.props.page.state=u,$){p=x.state,x.props.page&&(x.props.page.url=e);const E=(await Promise.all(y.on_navigate.map(A=>A(d.navigation)))).filter(A=>typeof A=="function");if(E.length>0){let A=function(){y.after_navigate=y.after_navigate.filter(j=>!E.includes(j))};E.push(A),y.after_navigate.push(...E)}q.$set(x.props),X=!0}else Me(x);const{activeElement:M}=document;await Se();const G=n?n.scroll:c?$e():null;if(P){const E=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));G?scrollTo(G.x,G.y):E?E.scrollIntoView():scrollTo(0,0)}const J=document.activeElement!==M&&document.activeElement!==document.body;!r&&!J&&Ie(),P=!0,x.props.page&&(R=x.props.page),D=!1,t==="popstate"&&Fe(N),d.fulfil(void 0),y.after_navigate.forEach(E=>E(d.navigation)),V.navigating.set(null),I=!1}async function ze(t,e,n,r){return t.origin===xe&&t.pathname===location.pathname&&!T?await ce({status:r,error:n,url:t,route:e}):await Y(t)}function lt(){let t;m.addEventListener("mousemove",l=>{const u=l.target;clearTimeout(t),t=setTimeout(()=>{r(u,2)},20)});function e(l){r(l.composedPath()[0],1)}m.addEventListener("mousedown",e),m.addEventListener("touchstart",e,{passive:!0});const n=new IntersectionObserver(l=>{for(const u of l)u.isIntersecting&&(ie(u.target.href),n.unobserve(u.target))},{threshold:0});function r(l,u){const h=We(l,m);if(!h)return;const{url:v,external:_,download:O}=Re(h,F);if(_||O)return;const U=ue(h);if(!U.reload)if(u<=U.preload_data){const d=Z(v,!1);d&&He(d)}else u<=U.preload_code&&ie(v.pathname)}function c(){n.disconnect();for(const l of m.querySelectorAll("a")){const{url:u,external:h,download:v}=Re(l,F);if(h||v)continue;const _=ue(l);_.reload||(_.preload_code===Be.viewport&&n.observe(l),_.preload_code===Be.eager&&ie(u.pathname))}}y.after_navigate.push(c),c()}function ee(t,e){if(t instanceof pe)return t.body;const n=de(t),r=Nt(t);return a.hooks.handleError({error:t,event:e,status:n,message:r})??{message:r}}return{after_navigate:t=>{Ee(()=>(y.after_navigate.push(t),()=>{const e=y.after_navigate.indexOf(t);y.after_navigate.splice(e,1)}))},before_navigate:t=>{Ee(()=>(y.before_navigate.push(t),()=>{const e=y.before_navigate.indexOf(t);y.before_navigate.splice(e,1)}))},on_navigate:t=>{Ee(()=>(y.on_navigate.push(t),()=>{const e=y.on_navigate.indexOf(t);y.on_navigate.splice(e,1)}))},disable_scroll_handling:()=>{(I||!$)&&(P=!1)},goto:(t,e={})=>(t=te(t),t.origin!==xe?Promise.reject(new Error("goto: invalid URL")):se(t,e,0)),invalidate:t=>{if(typeof t=="function")w.push(t);else{const{href:e}=new URL(t,location.href);w.push(n=>n.href===e)}return Ne()},invalidate_all:()=>(oe=!0,Ne()),preload_data:async t=>{const e=te(t),n=Z(e,!1);if(!n)throw new Error(`Attempted to preload a URL that does not belong to this app: ${e}`);const r=await He(n);if(r.type==="redirect")return{type:r.type,location:r.location};const{status:c,data:l}=r.props.page??R;return{type:r.type,status:c,data:l}},preload_code:t=>ie(t),push_state:(t,e)=>{const n={[K]:L+=1,[z]:N,[Ae]:R.url.href};Xe.call(history,n,"",te(t)),R={...R,state:e},q.$set({page:R}),ne[L]=e,Qe(L,N)},replace_state:(t,e)=>{const n={[K]:L,[z]:N,[Ae]:R.url.href};he.call(history,n,"",te(t)),R={...R,state:e},q.$set({page:R}),ne[L]=e},apply_action:async t=>{if(t.type==="error"){const e=new URL(location.href),{branch:n,route:r}=p;if(!r)return;const c=await Ve(p.branch.length,n,r.errors);if(c){const l=await Q({url:e,params:p.params,branch:n.slice(0,c.idx).concat(c.node),status:t.status??500,error:t.error,route:r});p=l.state,q.$set(l.props),Se().then(Ie)}}else t.type==="redirect"?se(t.location,{invalidateAll:!0},0):(q.$set({form:null,page:{...R,form:t.data,status:t.status}}),await Se(),q.$set({form:t.data}),t.type==="success"&&Ie())},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",e=>{let n=!1;if(qe(),!D){const r=tt(p,void 0,null,"leave"),c={...r.navigation,cancel:()=>{n=!0,r.reject(new Error("navigation was cancelled"))}};y.before_navigate.forEach(l=>l(c))}n?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&qe()}),navigator.connection?.saveData||lt(),m.addEventListener("click",e=>{if(e.button||e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.defaultPrevented)return;const n=We(e.composedPath()[0],m);if(!n)return;const{url:r,external:c,target:l,download:u}=Re(n,F);if(!r)return;if(l==="_parent"||l==="_top"){if(window.parent!==window)return}else if(l&&l!=="_self")return;const h=ue(n);if(!(n instanceof SVGAElement)&&r.protocol!==location.protocol&&!(r.protocol==="https:"||r.protocol==="http:")||u)return;if(c||h.reload){Je({url:r,type:"link"})?D=!0:e.preventDefault();return}const[_,O]=r.href.split("#");if(O!==void 0&&_===Pe(location)){if(p.url.hash===r.hash){e.preventDefault(),n.ownerDocument.getElementById(O)?.scrollIntoView();return}if(H=!0,Ue(L),t(r),!h.replace_state)return;H=!1}e.preventDefault(),le({type:"link",url:r,keepfocus:h.keepfocus,noscroll:h.noscroll,replace_state:h.replace_state??r.href===location.href})}),m.addEventListener("submit",e=>{if(e.defaultPrevented)return;const n=HTMLFormElement.prototype.cloneNode.call(e.target),r=e.submitter;if((r?.formMethod||n.method)!=="get")return;const l=new URL(r?.hasAttribute("formaction")&&r?.formAction||n.action);if(ke(l,F))return;const u=e.target,h=ue(u);if(h.reload)return;e.preventDefault(),e.stopPropagation();const v=new FormData(u),_=r?.getAttribute("name");_&&v.append(_,r?.getAttribute("value")??""),l.search=new URLSearchParams(v).toString(),le({type:"form",url:l,keepfocus:h.keepfocus,noscroll:h.noscroll,replace_state:h.replace_state??l.href===location.href})}),addEventListener("popstate",async e=>{if(e.state?.[K]){const n=e.state[K];if(B={},n===L)return;const r=W[n],c=ne[n]??{},l=new URL(e.state[Ae]??location.href),u=e.state[z],h=Pe(location)===Pe(p.url);if(u===N&&(X||h)){t(l),W[L]=$e(),r&&scrollTo(r.x,r.y),c!==R.state&&(R={...R,state:c},q.$set({page:R})),L=n;return}const _=n-L;await le({type:"popstate",url:l,popped:{state:c,scroll:r,delta:_},accept:()=>{L=n,N=u},block:()=>{history.go(-_)},nav_token:B})}else if(!H){const n=new URL(location.href);t(n)}}),addEventListener("hashchange",()=>{H&&(H=!1,he.call(history,{...history.state,[K]:++L,[z]:N},"",location.href))});for(const e of document.querySelectorAll("link"))e.rel==="icon"&&(e.href=e.href);addEventListener("pageshow",e=>{e.persisted&&V.navigating.set(null)});function t(e){p.url=e,V.page.set({...R,url:e}),V.page.notify()}},_hydrate:async({status:t=200,error:e,node_ids:n,params:r,route:c,data:l,form:u})=>{T=!0;const h=new URL(location.href);({params:r={},route:c={id:null}}=Z(h,!1)||{});let v;try{const _=n.map(async(d,S)=>{const k=l[S];return k?.uses&&(k.uses=it(k.uses)),me({loader:a.nodes[d],url:h,params:r,route:c,parent:async()=>{const x={};for(let M=0;M<S;M+=1)Object.assign(x,(await _[M]).data);return x},server_data_node:ve(k)})}),O=await Promise.all(_),U=i.find(({id:d})=>d===c.id);if(U){const d=U.layouts;for(let S=0;S<d.length;S++)d[S]||O.splice(S,0,void 0)}v=await Q({url:h,params:r,branch:O,status:t,error:e,form:u,route:U??null})}catch(_){if(_ instanceof Ye){await Y(new URL(_.location,location.href));return}v=await ce({status:de(_),error:await ee(_,{url:h,params:r,route:c}),url:h,route:c})}v.props.page&&(v.props.page.state={}),Me(v)}}}async function et(a,o){const i=new URL(a);i.pathname=Et(a.pathname),a.pathname.endsWith("/")&&i.searchParams.append(Ct,"1"),i.searchParams.append(jt,o.map(f=>f?"1":"0").join(""));const s=await ot(i.href);if(!s.ok){let f;throw s.headers.get("content-type")?.includes("application/json")?f=await s.json():s.status===404?f="Not Found":s.status===500&&(f="Internal Error"),new pe(s.status,f)}return new Promise(async f=>{const m=new Map,w=s.body.getReader(),g=new TextDecoder;function b(p){return ht(p,{Promise:T=>new Promise(($,P)=>{m.set(T,{fulfil:$,reject:P})})})}let y="";for(;;){const{done:p,value:T}=await w.read();if(p&&!y)break;for(y+=!T&&y?`
`:g.decode(T);;){const $=y.indexOf(`
`);if($===-1)break;const P=JSON.parse(y.slice(0,$));if(y=y.slice($+1),P.type==="redirect")return f(P);if(P.type==="data")P.nodes?.forEach(I=>{I?.type==="data"&&(I.uses=it(I.uses),I.data=b(I.data))}),f(P);else if(P.type==="chunk"){const{id:I,data:D,error:H}=P,X=m.get(I);m.delete(I),H?X.reject(b(H)):X.fulfil(b(D))}}}})}function it(a){return{dependencies:new Set(a?.dependencies??[]),params:new Set(a?.params??[]),parent:!!a?.parent,route:!!a?.route,url:!!a?.url,search_params:new Set(a?.search_params??[])}}function Ie(){const a=document.querySelector("[autofocus]");if(a)a.focus();else{const o=document.body,i=o.getAttribute("tabindex");o.tabIndex=-1,o.focus({preventScroll:!0,focusVisible:!1}),i!==null?o.setAttribute("tabindex",i):o.removeAttribute("tabindex");const s=getSelection();if(s&&s.type!=="None"){const f=[];for(let m=0;m<s.rangeCount;m+=1)f.push(s.getRangeAt(m));setTimeout(()=>{if(s.rangeCount===f.length){for(let m=0;m<s.rangeCount;m+=1){const w=f[m],g=s.getRangeAt(m);if(w.commonAncestorContainer!==g.commonAncestorContainer||w.startContainer!==g.startContainer||w.endContainer!==g.endContainer||w.startOffset!==g.startOffset||w.endOffset!==g.endOffset)return}s.removeAllRanges()}})}}}function tt(a,o,i,s){let f,m;const w=new Promise((b,y)=>{f=b,m=y});return w.catch(()=>{}),{navigation:{from:{params:a.params,route:{id:a.route?.id??null},url:a.url},to:i&&{params:o?.params??null,route:{id:o?.route?.id??null},url:i},willUnload:!o,type:s,complete:w},fulfil:f,reject:m}}async function Kt(a,o,i){const s=Dt(a,o);ft({client:s}),i?await s._hydrate(i):s.goto(location.href,{replaceState:!0}),s._start_router()}export{Kt as start};
//# sourceMappingURL=start.KNxEojsa.js.map
